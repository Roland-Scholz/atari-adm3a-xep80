PTR	EQU 0DDEVIC	EQU $300DUNIT	EQU $301DCOMND	EQU $302DSTATS	EQU $303DBUFLO	EQU $304DBUFHI	EQU $305DTIMLO	EQU $306DBYTLO	EQU $308DBYTHI	EQU $309DAUX1	EQU $30ADAUX2	EQU $30BDISKV	EQU $E453CIOV	EQU $E45RSIOV	EQU $E459COPEN	EQU 03CGETR	EQU 7CPUTR	EQU 11CCLOSE	EQU 12CBAUD	EQU 36CTRANS	EQU 38CCONCUR	EQU 40ICCOM	EQU $342ICBADR	EQU $344ICBLEN	EQU $348ICAUX1	EQU $34AICAUX2	EQU $34BEOL	EQU $9BBUFFER	EQU $4C00IMBRK	EQU $80IMKBD	EQU $40IMRECV	EQU $20IMSEND	EQU $10IMSCPL	EQU $08RMBRK	EQU $7FRMRECV	EQU $DFRMSEND	EQU $EFMSKRECV	EQU $A0+$40MSKSEND	EQU $90+$40SKSEND	EQU $23SKRECV	EQU $13POKMSK	EQU $10AUDF1	EQU $D200AUDC1	EQU $D201AUDF2	EQU $D202AUDC2	EQU $D203AUDF3	EQU $D204AUDC3	EQU $D205AUDF4	EQU $D206AUDC4	EQU $D207AUDCTL	EQU $D208SKREST	EQU $D20ASERIN	EQU $D20DSEROUT	EQU $D20DIRQEN	EQU $D20EIRQST	EQU $D20ESKCTL	EQU $D20FSKSTAT	EQU $D20FKBCODE	EQU $2FCNMIEN	EQU $D40E*	ORG $A800*START	JSR GEOUTCH*	SEI*	LDA #0*	STA NMIEN	JSR SETPOKY*	LDA #$FF*	JSR PUTSERLOOP	JSR GETSER	BCS RETURN	BREAK	CMP #EOL	BNE TRANSL	LDA #$0D		CRTRANSL	JSR PUTSER*	JSR PUTHEX*	JSR NEWLINELOOP2	JMP LOOPRETURN	RTS*PUTSER	SEI	TAX	LDA #RMSEND	STA IRQEN	LDA #MSKSEND	STA IRQEN	STX SEROUT	LDA #IMSENDPUTSER1	BIT IRQST	BNE PUTSER1	LDA #RMSEND	STA IRQEN*	LDA #MSKSEND*	STA IRQEN	TXA	CLI	RTS***GETSER	SEI	LDA #RMRECV	STA IRQEN	LDA #MSKRECV	STA IRQEN	LDA #IMRECVSERIN1	BIT IRQST	BPL BREAK	BNE SERIN1	LDA SERIN	LDX #RMRECV	STX IRQEN	LDX #MSKRECV	STX IRQEN	CLC	CLI	RTSSERIN2	LDA #0	CLC	CLI	RTSBREAK	SEC	CLI	RTSSETPOKY	LDA #86		BAUD	STA AUDF3	LDA #$0	STA AUDF4	LDA #$28	STA AUDCTL	LDA #$A0	STA AUDC1	STA AUDC2	STA AUDC3	STA AUDC4	LDA #SKSEND	STA SKCTL	RTSGEOUTCH	CLC	LDA $E406	ADC #1	STA OUTCH+1	LDA $E407	ADC #0	STA OUTCH+2	RTSNEWLINE	LDA #EOLPRINT	PHA	TXA	PHA	TYA	PHA	TSX	LDA $103,X	JSR OUTCH	PLA	TAY	PLA	TAX	PLA	RTSGETKEY	LDA $E425	PHA	LDA $E424	PHA	RTSGETSTAT	LDA $E429	PHA	LDA $E428	PHA	RTS*PRTWORD	JSR WORD2D	LDX #0	LDY #0PRTWRD1	LDA PACKDEC,Y	LSR	LSR	LSR	LSR	JSR PRTNIB	CPY #2	BNE PRTWRD2	INXPRTWRD2	LDA PACKDEC,Y	AND #15	JSR PRTNIB	INY	CPY #3	BNE PRTWRD1	LDX #0	JMP NEWLINEPRTNIB	BNE PRTNIB1	CPX #0	BNE PRTNIB1	RTSPRTNIB1	INX	CLC	ADC #'0	JMP PRINTWORD2D	STX WORD+1	STA WORD	LDX #2	LDA #0WORD2D1	STA PACKDEC,X	DEX	BPL WORD2D1	SED	LDX #16WORD2D3	ASL WORD	ROL WORD+1	LDY #2WORD2D2	LDA PACKDEC,Y	ADC PACKDEC,Y	STA PACKDEC,Y	DEY	BPL WORD2D2	DEX	BNE WORD2D3	CLD	RTS*PUTHEX	PHA	TXA	PHA	TYA	PHA	TSX	LDA $103,X	LSR	LSR	LSR	LSR	JSR PUTNIB	LDA $103,X	AND #15	JSR PUTNIB	PLA	TYA	PLA	TAX	PLA	RTSPUTNIB	CLC	ADC #'0	CMP #'9+1	BCC PUTNIB1	ADC #6PUTNIB1	JMP PRINT** VAR + CONST*PERCOM	DFW 0,0,0,0,0,0WORD	DFW 0PACKDEC	DFB 0,0,0OUTCH	JMP 0*KBSAVE	DFB 0ÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿÿ